<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®è°ƒè¯•é¡µé¢</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .data-box { border: 1px solid #ccc; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .data-box h3 { margin-top: 0; color: #333; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 3px; overflow-x: auto; }
        button { padding: 10px 15px; margin: 5px; cursor: pointer; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>ğŸ” æ•°æ®è°ƒè¯•é¡µé¢</h1>
    <p>æ£€æŸ¥localStorageä¸­çš„æ•°æ®çŠ¶æ€å’Œå‰å°è¯»å–æƒ…å†µ</p>
    
    <div class="controls">
        <button onclick="loadData()">ğŸ”„ åˆ·æ–°æ•°æ®</button>
        <button onclick="testProfileUpdate()">ğŸ§ª æµ‹è¯•ä¸ªäººä¿¡æ¯æ›´æ–°</button>
        <button onclick="clearAllData()">ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰æ•°æ®</button>
        <button onclick="initializeTestData()">ğŸ¯ åˆå§‹åŒ–æµ‹è¯•æ•°æ®</button>
    </div>
    
    <div class="data-box">
        <h3>ğŸ“Š localStorage åŸå§‹æ•°æ®</h3>
        <div id="localStorage-data">
            <p>åŠ è½½ä¸­...</p>
        </div>
    </div>
    
    <div class="data-box">
        <h3>ğŸ‘¤ ä¸ªäººä¿¡æ¯æ•°æ® (profile_data)</h3>
        <div id="profile-data">
            <p>åŠ è½½ä¸­...</p>
        </div>
    </div>
    
    <div class="data-box">
        <h3>ğŸ¨ ä½œå“æ•°æ® (artworks_data)</h3>
        <div id="artworks-data">
            <p>åŠ è½½ä¸­...</p>
        </div>
    </div>
    
    <div class="data-box">
        <h3>ğŸŒ å¤šè¯­è¨€æ•°æ® (i18n_data)</h3>
        <div id="i18n-data">
            <p>åŠ è½½ä¸­...</p>
        </div>
    </div>
    
    <div class="data-box">
        <h3>ğŸ” å‰å°é¡µé¢å…ƒç´ æ£€æµ‹</h3>
        <div id="elements-check">
            <p>åŠ è½½ä¸­...</p>
        </div>
    </div>
    
    <div class="data-box">
        <h3>ğŸ“ æµ‹è¯•æ—¥å¿—</h3>
        <div id="test-log">
            <pre id="log-content"></pre>
        </div>
    </div>

    <script>
        let logContent = '';
        
        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            logContent += `[${timestamp}] ${message}\n`;
            document.getElementById('log-content').textContent = logContent;
        }
        
        function loadData() {
            log('å¼€å§‹åŠ è½½æ•°æ®...');
            
            // æ£€æŸ¥localStorageä¸­çš„æ‰€æœ‰æ•°æ®
            const keys = ['profile_data', 'artworks_data', 'i18n_data', 'site_config'];
            let localStorageHtml = '<ul>';
            
            keys.forEach(key => {
                const data = localStorage.getItem(key);
                if (data) {
                    localStorageHtml += `<li><strong>${key}</strong>: ${data.length} å­—ç¬¦</li>`;
                } else {
                    localStorageHtml += `<li><strong>${key}</strong>: <span class="error">ä¸å­˜åœ¨</span></li>`;
                }
            });
            localStorageHtml += '</ul>';
            document.getElementById('localStorage-data').innerHTML = localStorageHtml;
            
            // æ˜¾ç¤ºä¸ªäººä¿¡æ¯æ•°æ®
            const profileData = localStorage.getItem('profile_data');
            if (profileData) {
                try {
                    const profile = JSON.parse(profileData);
                    document.getElementById('profile-data').innerHTML = `<pre>${JSON.stringify(profile, null, 2)}</pre>`;
                    log(`ä¸ªäººä¿¡æ¯æ•°æ®åŠ è½½æˆåŠŸ: å§“å=${profile.name}, é‚®ç®±=${profile.email}`);
                } catch (e) {
                    document.getElementById('profile-data').innerHTML = `<span class="error">æ•°æ®è§£æé”™è¯¯: ${e.message}</span>`;
                    log(`ä¸ªäººä¿¡æ¯æ•°æ®è§£æå¤±è´¥: ${e.message}`);
                }
            } else {
                document.getElementById('profile-data').innerHTML = '<span class="error">æ— ä¸ªäººä¿¡æ¯æ•°æ®</span>';
                log('localStorageä¸­æ²¡æœ‰profile_data');
            }
            
            // æ˜¾ç¤ºä½œå“æ•°æ®
            const artworksData = localStorage.getItem('artworks_data');
            if (artworksData) {
                try {
                    const artworks = JSON.parse(artworksData);
                    document.getElementById('artworks-data').innerHTML = `<p>ä½œå“æ•°é‡: ${artworks.length}</p><pre>${JSON.stringify(artworks.slice(0, 2), null, 2)}...</pre>`;
                    log(`ä½œå“æ•°æ®åŠ è½½æˆåŠŸ: ${artworks.length}ä»¶ä½œå“`);
                } catch (e) {
                    document.getElementById('artworks-data').innerHTML = `<span class="error">æ•°æ®è§£æé”™è¯¯: ${e.message}</span>`;
                }
            } else {
                document.getElementById('artworks-data').innerHTML = '<span class="error">æ— ä½œå“æ•°æ®</span>';
                log('localStorageä¸­æ²¡æœ‰artworks_data');
            }
            
            // æ˜¾ç¤ºå¤šè¯­è¨€æ•°æ®
            const i18nData = localStorage.getItem('i18n_data');
            if (i18nData) {
                try {
                    const i18n = JSON.parse(i18nData);
                    const artistName = i18n.zh ? i18n.zh['artist-name'] : 'æœªè®¾ç½®';
                    document.getElementById('i18n-data').innerHTML = `<p>è‰ºæœ¯å®¶å§“å: ${artistName}</p><pre>${JSON.stringify(i18n.zh, null, 2).substring(0, 500)}...</pre>`;
                    log(`å¤šè¯­è¨€æ•°æ®åŠ è½½æˆåŠŸ: è‰ºæœ¯å®¶å§“å=${artistName}`);
                } catch (e) {
                    document.getElementById('i18n-data').innerHTML = `<span class="error">æ•°æ®è§£æé”™è¯¯: ${e.message}</span>`;
                }
            } else {
                document.getElementById('i18n-data').innerHTML = '<span class="error">æ— å¤šè¯­è¨€æ•°æ®</span>';
                log('localStorageä¸­æ²¡æœ‰i18n_data');
            }
            
            // æ£€æµ‹é¡µé¢å…ƒç´ 
            checkElements();
        }
        
        function checkElements() {
            let elementsHtml = '<ul>';
            
            // æ£€æŸ¥è‰ºæœ¯å®¶å§“åå…ƒç´ 
            const artistNameElements = document.querySelectorAll('[data-i18n="artist-name"]');
            elementsHtml += `<li>è‰ºæœ¯å®¶å§“åå…ƒç´ : ${artistNameElements.length} ä¸ª`;
            if (artistNameElements.length > 0) {
                elementsHtml += ` (å†…å®¹: "${artistNameElements[0].textContent}")`;
            }
            elementsHtml += '</li>';
            
            // æ£€æŸ¥é‚®ç®±å…ƒç´ 
            const emailElement = document.getElementById('contact-email-address');
            elementsHtml += `<li>é‚®ç®±å…ƒç´ : ${emailElement ? 'æ‰¾åˆ°' : 'æœªæ‰¾åˆ°'}`;
            if (emailElement) {
                elementsHtml += ` (å†…å®¹: "${emailElement.textContent}")`;
            }
            elementsHtml += '</li>';
            
            // æ£€æŸ¥ä¸ªäººç®€ä»‹å…ƒç´ 
            const aboutIntroElement = document.querySelector('[data-i18n="about-intro"]');
            elementsHtml += `<li>ä¸ªäººç®€ä»‹å…ƒç´ : ${aboutIntroElement ? 'æ‰¾åˆ°' : 'æœªæ‰¾åˆ°'}`;
            if (aboutIntroElement) {
                elementsHtml += ` (é•¿åº¦: ${aboutIntroElement.textContent.length}å­—ç¬¦)`;
            }
            elementsHtml += '</li>';
            
            elementsHtml += '</ul>';
            document.getElementById('elements-check').innerHTML = elementsHtml;
        }
        
        function testProfileUpdate() {
            log('å¼€å§‹æµ‹è¯•ä¸ªäººä¿¡æ¯æ›´æ–°...');
            
            // æ¨¡æ‹Ÿæ›´æ–°ä¸ªäººä¿¡æ¯
            const testProfile = {
                name: "æµ‹è¯•è‰ºæœ¯å®¶",
                bio: "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•çš„ä¸ªäººç®€ä»‹ï¼Œç”¨äºéªŒè¯æ•°æ®åŒæ­¥åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚",
                email: "test@example.com",
                stats: {
                    artworks: 99,
                    exhibitions: 88,
                    experience: 77
                }
            };
            
            // ä¿å­˜åˆ°localStorage
            localStorage.setItem('profile_data', JSON.stringify(testProfile));
            log('æµ‹è¯•æ•°æ®å·²ä¿å­˜åˆ°localStorage');
            
            // è§¦å‘æ›´æ–°äº‹ä»¶
            window.dispatchEvent(new StorageEvent('storage', {
                key: 'profile_data',
                newValue: JSON.stringify(testProfile)
            }));
            
            log('å·²è§¦å‘storageäº‹ä»¶');
            
            // åˆ·æ–°æ•°æ®æ˜¾ç¤º
            setTimeout(() => {
                loadData();
                log('æµ‹è¯•å®Œæˆï¼Œè¯·æ£€æŸ¥æ•°æ®æ˜¯å¦æ›´æ–°');
            }, 1000);
        }
        
        function clearAllData() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰localStorageæ•°æ®å—ï¼Ÿ')) {
                localStorage.clear();
                log('æ‰€æœ‰localStorageæ•°æ®å·²æ¸…ç©º');
                loadData();
            }
        }
        
        function initializeTestData() {
            log('åˆå§‹åŒ–æµ‹è¯•æ•°æ®...');
            
            // åˆå§‹åŒ–ä¸ªäººä¿¡æ¯
            const profile = {
                name: "æ—å£«æ—",
                bio: "æˆ‘æ˜¯ä¸€ä½ä¸“æ³¨äºå½“ä»£è‰ºæœ¯åˆ›ä½œçš„è‰ºæœ¯å®¶ï¼Œè‡´åŠ›äºé€šè¿‡å¤šæ ·åŒ–çš„åª’ä»‹æ¢ç´¢äººæ€§ã€è‡ªç„¶ä¸ç¤¾ä¼šçš„æ·±å±‚è”ç³»ã€‚æˆ‘çš„ä½œå“èåˆäº†ä¼ ç»ŸæŠ€æ³•ä¸ç°ä»£ç†å¿µï¼Œå¸Œæœ›é€šè¿‡ç‹¬ç‰¹çš„è§†è§‰è¯­è¨€ä¸è§‚ä¼—äº§ç”Ÿå…±é¸£ã€‚",
                email: "linshilin.art@gmail.com",
                stats: {
                    artworks: 50,
                    exhibitions: 5,
                    experience: 3
                }
            };
            localStorage.setItem('profile_data', JSON.stringify(profile));
            
            // åˆå§‹åŒ–åŸºæœ¬å¤šè¯­è¨€æ•°æ®
            const i18n = {
                zh: {
                    'artist-name': 'æ—å£«æ—',
                    'about-intro': 'æˆ‘æ˜¯ä¸€ä½ä¸“æ³¨äºå½“ä»£è‰ºæœ¯åˆ›ä½œçš„è‰ºæœ¯å®¶ï¼Œè‡´åŠ›äºé€šè¿‡å¤šæ ·åŒ–çš„åª’ä»‹æ¢ç´¢äººæ€§ã€è‡ªç„¶ä¸ç¤¾ä¼šçš„æ·±å±‚è”ç³»ã€‚'
                }
            };
            localStorage.setItem('i18n_data', JSON.stringify(i18n));
            
            log('æµ‹è¯•æ•°æ®åˆå§‹åŒ–å®Œæˆ');
            loadData();
        }
        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨åŠ è½½æ•°æ®
        window.onload = function() {
            log('è°ƒè¯•é¡µé¢åŠ è½½å®Œæˆ');
            loadData();
        };
    </script>
</body>
</html>